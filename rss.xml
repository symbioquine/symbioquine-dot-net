<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Symbioquine]]></title><description><![CDATA[Here is written stuff about systems, technology, ecology, and more.]]></description><link>https://symbioquine.net</link><image><url>https://symbioquine.net/logos/logo-48.png</url><title>Symbioquine</title><link>https://symbioquine.net</link></image><generator>GatsbyJS Advanced Starter</generator><lastBuildDate>Mon, 29 Nov 2021 19:16:57 GMT</lastBuildDate><atom:link href="https://symbioquine.net/rss.xml" rel="self" type="application/rss+xml"/><copyright><![CDATA[Copyright © 2021. All rights reserved.]]></copyright><item><title><![CDATA[Off-grid lead acid battery charging]]></title><description><![CDATA[Recently I spent some time analyzing an off-grid system for some less technical family members. In trying to understand and explain why it…]]></description><link>https://symbioquine.net/2021-11-29-off-grid-lead-acid-battery-charging</link><guid isPermaLink="false">https://symbioquine.net/2021-11-29-off-grid-lead-acid-battery-charging</guid><category><![CDATA[Off-grid]]></category><category><![CDATA[Batteries]]></category><category><![CDATA[Solar]]></category><pubDate>Mon, 29 Nov 2021 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Recently I spent some time analyzing an off-grid system for some less technical family members. In trying to understand and explain why it wasn&apos;t performing as they expected, I gained a greater appreciation for the nuances of lead acid (LA) battery charging characteristics and how they affect off-grid systems - especially those systems with insufficient solar capacity and those in less equatorial latitudes.&lt;/p&gt;
&lt;p&gt;There are many other articles describing the care and feeding of LA batteries (&lt;a href=&quot;https://www.sevarg.net/2018/04/08/off-grid-rv-lead-acid-maintenance-charging-failure-modes/&quot;&gt;here is one of my favorites&lt;/a&gt;) so I will try to go beyond just reiterating the conventional wisdom about LA battery life being inversely proportional to the depth of discharge (DoD). I&apos;m instead going to focus on one of the most important off-grid system characteristics which I think is both crucial and often neglected. That characteristic is &lt;strong&gt;charging time&lt;/strong&gt;. (*Actually, reputable battery manufacturers often &lt;strong&gt;do&lt;/strong&gt; provide specifications/guidance that are both detailed and tailored to their products, but for whatever reason that information - and the consequences thereof - doesn&apos;t seem to be well represented more generally.*)&lt;/p&gt;
&lt;p&gt;All batteries have maximum rates at which they can safely charge. For LA batteries, the charging rates are usually specified by the manufacturer either in terms of a number of hours in bulk and absorption charging or in terms of a graph showing the state of charge (SoC) vs charging power and time. Regardless of how much solar capacity a system has, it will tend not to fully charge the batteries unless the system has long enough with sufficient power for charging from a given average DoD.&lt;/p&gt;
&lt;p&gt;You&apos;ve probably seen the characteristic charge curve of LA batteries where the charging amperage - and total power - tapers off dramatically before the batteries are full.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b98eb2ab66154934f4329d766d842a58/f6f78/lead-acid-charging-amps.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 44.50867052023121%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAA80lEQVQoz5VSW3LDIAz0GZrYgHgax3Ha+99P1QJOSNxmJh87O+ixLBLDpC2fJ3PECNasjOPL9sN5vfGo6O/aDgMaUFhhKmti7XwpwPnrrAr6mj33yoMm3wkKJmJFlv2S+CQuIf6Ub/hXEA77IDAZ4nCZD/F3QvcnH5LNYdqyCNuW+0Cwn2FxJ0tyOXK8Zk63Rc7UFvRecMfQb/k0ajbe8/y9cFhnjuISrKyrs9QvS8Flqv8VpgoCWprQmLaluAMghqfHHS0W11xmHNYaoxgeDqFKPrBLc1mGi8IyQ7AiJ7nIRr4QvpENqcy35mzp2dmIBhz/Ah4z6H51UCj0AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Graph of lead acid charging amperage from a 10% DoD&quot;
        title=&quot;Graph of lead acid charging amperage from a 10% DoD&quot;
        src=&quot;/static/b98eb2ab66154934f4329d766d842a58/1e043/lead-acid-charging-amps.png&quot;
        srcset=&quot;/static/b98eb2ab66154934f4329d766d842a58/991de/lead-acid-charging-amps.png 173w,
/static/b98eb2ab66154934f4329d766d842a58/e4d6b/lead-acid-charging-amps.png 345w,
/static/b98eb2ab66154934f4329d766d842a58/1e043/lead-acid-charging-amps.png 690w,
/static/b98eb2ab66154934f4329d766d842a58/f6f78/lead-acid-charging-amps.png 932w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The above graph is showing a Renogy 200 Ah AGM charging from a 10% DoD on 2021/07/05.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;That roughly matches the manufacturer&apos;s charging characteristics graph.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/86fcb9da0c395c96d506710e92bad0ee/35751/renogy-200ah-agm-charge-characteristics.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 72.25433526011561%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA+wAAAPsAHpfpy9AAACPUlEQVQoz41SiXajMAzk//+qr6/bTZs0IRc32OYwh42NDUmPpNmh6QesnhCD7JGRPM5ut3t8fHx4eFgul09PT4vF4u+PIbndbler1Xq9fnl52Ww2SAIgAzBN0+12cy6Xy/l8xsfX19fHxwcw4vv7O+Ln5+cdA3x/f2MDACIy1+t1Jt/+w8AZhsFaO42w6TSdQEY5B4+UEvWsMdgx3W3echrh03Q+n7BCCInC4HDYR3FIsrSpG1Dm3+7lbIMetNZ2rj+ZcTK9HHvZc16SvMxYweoozBbPq+Uzml5xXmPRKcuiaRpKUiEEyMZaWRTC94h7SPahtw2igMQRy1NKvdD9+7p7XbuLZcloliVOVVUg54yA3NaCHyL6tl/k6k8qG9krpbVSA159D1ezqwGhE2maOHmet01bMNq17WDH+czt0eU6quR5tIMxmMUIt2aawTC7tajiHY5OXddd1/GqFJ3QQrC9HxzjQmjaSswPXRQZTYOYhknqesnOjzbHrhVK9Ywyp8hzjI6RrOtaTlnsJUlWqq6jQnWyx7GNVFz0jdRcaC416kptcHISxw6lWdu2WRJLKeKlu0+KTumBMd5JKvQ02l/H7VkzqN5ohSn0Ev35zjiNSs1zsVqt37xaalyslr2klJAiKdu8FkUtW6nzstq6u4Pn+X6ATnG7s8Lu2lRS8pJba1AKrRpjZFVxQkvCSJgEXuh7SRgSP8lDWpVldYFI7gKEzn7iL8AvoiXGGCbCGIXQsXK9Xq6zQVaXu7b/ASDt/3UmQOUcAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Renogy 200 Ah AGM charge characteristics curves&quot;
        title=&quot;Renogy 200 Ah AGM charge characteristics curves&quot;
        src=&quot;/static/86fcb9da0c395c96d506710e92bad0ee/1e043/renogy-200ah-agm-charge-characteristics.png&quot;
        srcset=&quot;/static/86fcb9da0c395c96d506710e92bad0ee/991de/renogy-200ah-agm-charge-characteristics.png 173w,
/static/86fcb9da0c395c96d506710e92bad0ee/e4d6b/renogy-200ah-agm-charge-characteristics.png 345w,
/static/86fcb9da0c395c96d506710e92bad0ee/1e043/renogy-200ah-agm-charge-characteristics.png 690w,
/static/86fcb9da0c395c96d506710e92bad0ee/35751/renogy-200ah-agm-charge-characteristics.png 873w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;That charging curve is both a blessing and a curse. It means up to around 80% of the capacity can be regained at roughly the maximum charge rate - usually around 10-13% (of the 20 hour capacity rating) for FLA and closer to 20% for AGM. However, it also means that batteries are often cycled in a lower average SoC range than one might expect. For example, if you tend to use 30% of your battery capacity over night and only have 4 hours of charging time during the day, you will probably be cycling your batteries between 50% and 80% instead of 70% and 100% - even assuming the system has plenty of solar panels.&lt;/p&gt;
&lt;p&gt;There are a number of approaches to mitigating/solving this problem;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Shifting loads to the day time if/when there is excess solar capacity.&lt;/li&gt;
&lt;li&gt;Reducing usage such that - on average - there are enough hours of solar to charge when taking into account the battery charge curve.&lt;/li&gt;
&lt;li&gt;Performing a portion of the bulk charge using generator power in the morning before the &quot;solar charging day&quot; begins.&lt;/li&gt;
&lt;li&gt;This yields the best value for the time spent running a generator since most generators are most efficient between 40% and 70% of their rated output.&lt;/li&gt;
&lt;li&gt;Increasing the size of the LA battery bank.&lt;/li&gt;
&lt;li&gt;This will allow the same amount of usage while staying at a higher SoC - which in turn means staying farther down the tail end of the charging curve.&lt;/li&gt;
&lt;li&gt;Shifting loads to other battery technologies.&lt;/li&gt;
&lt;li&gt;The cheap/easy version of this is similar to #1 where one just charges laptops/phones/etc during the day when there is excess solar capacity.&lt;/li&gt;
&lt;li&gt;This could also be a strategy for moving to another battery technology altogether. For example, by using a &lt;a href=&quot;https://www.amazon.com/dp/B085G72RQ2&quot;&gt;DC-DC charger&lt;/a&gt; configured to charge a secondary LiFePo4 battery bank to which loads and batteries are added incrementally.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Hopefully this post has served to highlight the importance of considering charging time as a key aspect of off-grid load management and battery sizing. May your systems be performant, long lasting, and boring.&lt;/p&gt;</content:encoded><author>symbioquine@gmail.com</author></item><item><title><![CDATA[Epever Solar Charge Controller Clocks Running Fast]]></title><description><![CDATA[As a follow-up to my previous post about off-grid solar monitoring via the ESP8266, I am writing this post to share what I've learned about…]]></description><link>https://symbioquine.net/2020-09-02-epever-scc-clocks-running-fast</link><guid isPermaLink="false">https://symbioquine.net/2020-09-02-epever-scc-clocks-running-fast</guid><category><![CDATA[Solar]]></category><category><![CDATA[Microcontrollers]]></category><category><![CDATA[Off-grid]]></category><pubDate>Thu, 02 Sep 2021 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;As a follow-up to my &lt;a href=&quot;./2020-10-27-epever-esp-8266-controller&quot;&gt;previous post&lt;/a&gt; about off-grid solar monitoring via the ESP8266, I am writing this post to share what I&apos;ve learned about the clock behavior on the EPever (EPSolar) Tracer####AN line of MPPT solar charge controllers.&lt;/p&gt;
&lt;p&gt;I have four of these solar charge controllers running all the time each with an ESP8266 publishing metrics back to an InfluxDB instance. The Epever Tracer units provide several features which depend on date/time;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Time-of-day load control&lt;/li&gt;
&lt;li&gt;Cumulative energy generated/consumed stats&lt;/li&gt;
&lt;li&gt;Periodic equalization charging for lead-acid batteries&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My loads are almost always switched on so the first feature is not particularly useful to me, but the other two are. These features make the most sense when the clock on the Epever unit is set accurately. The date/time can be viewed and set manually via the MT-50 external display, or by some other device over Modbus/RS485 - in my case the ESP8266.&lt;/p&gt;
&lt;p&gt;If the clock on the Epever units was accurate enough, there wouldn&apos;t be much point in automatically correcting it from the ESP8266 since it could just be set upon initial system setup with the MT-50. On the other hand, if the clock was inaccurate, it would be nice to automatically correct it using the time from an NTP server. To understand this, I started capturing a &quot;timeDrift&quot; metric calculated by subtracting the current NTP time from the current time reported by the Epever unit. This new metric showed that the Epever units were consistently running a little fast - ~4s/day.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/85803e71a3564c94884ca6a7d4137a02/cc418/time_drift_metric.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.17919075144509%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA+wAAAPsAHpfpy9AAAAzElEQVQoz32SCQ6EIAxFPYQLFGgpuIxm7n++KZIgbpO8GNT/+k1j0w1wp1fGYrDI2mDbX9+2vW47rQCbkn5I7NSBPEhZh6MH9M1jc04XOnEEZbRzNDNvkT8xyXXoQpqyawNYF7xfAq9JkwMt/CqXL5QqF704YU1OJvsPsvQkTQEQ+jmEbbxomZNcNjSAsUy0azlUnAf52KGTHXJYx7v2Kg/aGEKauDx9Q/Zcn8FRI1Xjd4rSJp1/kdH1OTUbJECU6wHt4AkQyNe38vP9AF4nTEXE7SQaAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Single time drift metric&quot;
        title=&quot;Single time drift metric&quot;
        src=&quot;/static/85803e71a3564c94884ca6a7d4137a02/1e043/time_drift_metric.png&quot;
        srcset=&quot;/static/85803e71a3564c94884ca6a7d4137a02/991de/time_drift_metric.png 173w,
/static/85803e71a3564c94884ca6a7d4137a02/e4d6b/time_drift_metric.png 345w,
/static/85803e71a3564c94884ca6a7d4137a02/1e043/time_drift_metric.png 690w,
/static/85803e71a3564c94884ca6a7d4137a02/e3189/time_drift_metric.png 1035w,
/static/85803e71a3564c94884ca6a7d4137a02/b1001/time_drift_metric.png 1380w,
/static/85803e71a3564c94884ca6a7d4137a02/cc418/time_drift_metric.png 1992w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;I would also occasionally get nonsense datapoints where the Epever unit would briefly report a current date/time about 40 years in the past (approx. -1.26 * 10^9).&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ca10c157f631b3fb2517390e11ec7885/cc418/clock_race_condition.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.17919075144509%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA+wAAAPsAHpfpy9AAAAeElEQVQoz82SSwrAIAxEvUOrJvGDvf8lOxoQEbMsFIbhmZjMJs5HuQPDVZNTabk+JOXYBZBUZw0DLk9r6zAcKOEBV1m8VQAjOfAxeeMvku20PydHxiaBqyxeKyN8JFPKuAi4yuJZieq91YcrzgjOClO8+KbxU3J7AX1yPo4Lx5qsAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Clock race condition&quot;
        title=&quot;Clock race condition&quot;
        src=&quot;/static/ca10c157f631b3fb2517390e11ec7885/1e043/clock_race_condition.png&quot;
        srcset=&quot;/static/ca10c157f631b3fb2517390e11ec7885/991de/clock_race_condition.png 173w,
/static/ca10c157f631b3fb2517390e11ec7885/e4d6b/clock_race_condition.png 345w,
/static/ca10c157f631b3fb2517390e11ec7885/1e043/clock_race_condition.png 690w,
/static/ca10c157f631b3fb2517390e11ec7885/e3189/clock_race_condition.png 1035w,
/static/ca10c157f631b3fb2517390e11ec7885/b1001/clock_race_condition.png 1380w,
/static/ca10c157f631b3fb2517390e11ec7885/cc418/clock_race_condition.png 1992w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;I believe this to be due to some sort of race condition in how the Epever units read the time from their internal real-time-clock to report it back via Modbus. That hypothesis is reinforced by the observation that the erroneous datapoints tend to fluctuate by 60s and occasionally 3600s - suggesting that the race condition is occurring when a Modbus request for the time coincides with a minute or hour rolling over.&lt;/p&gt;
&lt;p&gt;With all those observations in hand, I ended up with some roughly Arduino compatible code that monitors and automatically corrects the Epever unit&apos;s clock when it becomes too far out of sync;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c++&quot;&gt;&lt;pre class=&quot;language-c++&quot;&gt;&lt;code class=&quot;language-c++&quot;&gt;uint16_t pack_as_int(uint8_t v0, uint8_t v1) {
  uint16_t t = (v0 &amp;lt;&amp;lt; 8) | v1;
  return t;
}

uint32_t upper_int(uint16_t v) {
  return (v &amp;gt;&amp;gt; 8) &amp;amp; 0xFF;
}

uint32_t lower_int(uint16_t v) {
  return v &amp;amp; 0xFF;
}

bool readDevClock(time_t&amp;amp; devTime) {
  delay(250);
  uint8_t result = node-&amp;gt;readHoldingRegisters(0x9013, 0x3);
  if (result != ModbusMaster::ku8MBSuccess) {
    Serial.printf(&amp;quot;Failed to read date from charge controller: 0x%02X\n&amp;quot;, result);
    return false;
  }

  uint16_t min_and_sec = node-&amp;gt;getResponseBuffer(0x0);
  uint16_t day_and_hour = node-&amp;gt;getResponseBuffer(0x1);
  uint16_t year_and_month = node-&amp;gt;getResponseBuffer(0x2);

  struct tm devTm;

  devTm.tm_year = (upper_int(year_and_month) + 2000) - 1900;
  devTm.tm_mon = lower_int(year_and_month) - 1;
  devTm.tm_mday = upper_int(day_and_hour);
  devTm.tm_hour = lower_int(day_and_hour);
  devTm.tm_min = upper_int(min_and_sec);
  devTm.tm_sec = lower_int(min_and_sec);
  devTm.tm_isdst = -1;

  devTime = mktime(&amp;amp;devTm);

  if (devTime &amp;lt; -1260000000 &amp;amp;&amp;amp; devTime &amp;gt; -1270000000) {
    Serial.printf(&amp;quot;Received faulty date from charge controller: %04d-%02d-%02dT%02d:%02d:%02dZ\n&amp;quot;, devTm.tm_year + 1900, devTm.tm_mon + 1, devTm.tm_mday, devTm.tm_hour, devTm.tm_min, devTm.tm_sec);
    return false;
  }

  return true;
}

void syncClock() {
  time_t devTime0;
  time_t devTime1;

  // Don&amp;#39;t record metrics or adjust controller date/time if we can&amp;#39;t reliably tell
  // what time it has already set
  if (!readDevClock(devTime0) || !readDevClock(devTime1)) {
      return;
  }

  long int devTimeDelta = devTime0 - devTime1;

  if (devTimeDelta &amp;lt; -10 || devTimeDelta &amp;gt; 10) {
      metricBuffer-&amp;gt;appendf(&amp;quot;,devTimeDelta=%di&amp;quot;, devTimeDelta);
      return;
  }

  time_t currTime;
  time(&amp;amp;currTime);

  // Don&amp;#39;t record metrics or adjust controller date/time if somehow we didn&amp;#39;t
  // get the correct time from NTP
  if (currTime &amp;lt; 1000000000l) {
      return;
  }

  // Serial.printf(&amp;quot;Got date from charge controller: %d-%d-%dT%d:%d:%dZ (currTime = %ld, devTime = %ld, drift = %ld)\n&amp;quot;,
  //   devTm.tm_year + 1900, devTm.tm_mon + 1, devTm.tm_mday, devTm.tm_hour, devTm.tm_min, devTm.tm_sec, currTime, devTime, devTime - currTime);

  long int timeDrift = devTime1 - currTime;

  metricBuffer-&amp;gt;appendf(&amp;quot;,devTime=%di&amp;quot;, devTime1);
  metricBuffer-&amp;gt;appendf(&amp;quot;,currTime=%di&amp;quot;, currTime);
  metricBuffer-&amp;gt;appendf(&amp;quot;,timeDrift=%di&amp;quot;, timeDrift);

  struct tm *currTm = localtime(&amp;amp;currTime);

  // Only update controller date/time if it is more than an hour off or we&amp;#39;re in the first five minutes of the day
  bool shouldUpdate = abs(timeDrift) &amp;gt; 3600 || (abs(timeDrift) &amp;gt; 5 &amp;amp;&amp;amp; currTm-&amp;gt;tm_hour == 0 &amp;amp;&amp;amp; currTm-&amp;gt;tm_min &amp;lt;= 5);
  if (!shouldUpdate) {
      return;
  }

  node-&amp;gt;setTransmitBuffer(0, pack_as_int(currTm-&amp;gt;tm_min, currTm-&amp;gt;tm_sec));
  node-&amp;gt;setTransmitBuffer(1, pack_as_int(currTm-&amp;gt;tm_mday, currTm-&amp;gt;tm_hour));
  node-&amp;gt;setTransmitBuffer(2, pack_as_int((currTm-&amp;gt;tm_year + 1900) - 2000, currTm-&amp;gt;tm_mon + 1));

  uint8_t result = node-&amp;gt;writeMultipleRegisters(0x9013, 3);
  if (result == ModbusMaster::ku8MBSuccess) {
    Serial.printf(&amp;quot;Successfully set charge controller date/time.\n&amp;quot;);
  } else {
    Serial.printf(&amp;quot;Failed to set charge controller date/time: 0x%02X&amp;quot;, result);
  }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Which yields the following nice behavior where all four of my controllers are consistently drifting by about 4s per day and having their clocks updated approximately every other day at midnight;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a07e7864f198dc385fb41a95e3b5cf1a/9831c/clock_drift_with_correction.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.75722543352601%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA+wAAAPsAHpfpy9AAAB2ElEQVQoz12S646bMBCFeYZuwPaMbQwEknA3ucAaCLlok2zTvv/r1FnUVq00so49xzM/zud4FAnjc83ao5yCkCqyRdH/0/1rm4uiQ0AsCFIKLmGgli4BYFYDVcuFx5KAux7zQHgEJIJr58qQ2AGAbx5zMEkp8IiDDMJ8VzGGKx/tFEjyPOFtJl0mIVr7iCFCsF4lZSoBlj7/5jJHlXUkeKqwMU3Z1aHAleK4Lle6OG9VFXOxKYKiWEuMfd6d96nONhJCyd88cJL9LlN8aGJz7Xa9Tn1cxdHqsJ8u+qr9JguWbZvWRa6g26+Hh2m2WaEgjpcuCKc4bPtc3i5NfzenSWcBr5pquJv7RZ9r2XXlpn9vdDYU/sf9MD7McEjzUJb7hqBwrufdZ795fJrrd3ObqjyJrrfu8dM8z9VHG083o4fuYvLnubw9+/sPM+42O51fHoZy7lxPehrr6WhPPZiqa0u7316PppjGyoza9Po0ltYzHl/v720xTc3xWFPkDviKSt9mRTyq4iCIFRDquQSXiSdUolgSIpHBgqJgbLGg6yKWPpeMEcocm7VHYY7esuHOnFiNwraQi5kHYm1fhDBA66GML145SyVkwED8T9Jv2v5h67VpFq/PvwAFB2BtMZXQrQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Clock drift with correction&quot;
        title=&quot;Clock drift with correction&quot;
        src=&quot;/static/a07e7864f198dc385fb41a95e3b5cf1a/1e043/clock_drift_with_correction.png&quot;
        srcset=&quot;/static/a07e7864f198dc385fb41a95e3b5cf1a/991de/clock_drift_with_correction.png 173w,
/static/a07e7864f198dc385fb41a95e3b5cf1a/e4d6b/clock_drift_with_correction.png 345w,
/static/a07e7864f198dc385fb41a95e3b5cf1a/1e043/clock_drift_with_correction.png 690w,
/static/a07e7864f198dc385fb41a95e3b5cf1a/e3189/clock_drift_with_correction.png 1035w,
/static/a07e7864f198dc385fb41a95e3b5cf1a/b1001/clock_drift_with_correction.png 1380w,
/static/a07e7864f198dc385fb41a95e3b5cf1a/9831c/clock_drift_with_correction.png 1995w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In the future I hope to share more of my learnings about monitoring/controlling cheap off-grid solar charge controllers - and perhaps a more complete firmware at some point too.&lt;/p&gt;
&lt;p&gt;Thanks for reading!&lt;/p&gt;</content:encoded><author>symbioquine@gmail.com</author></item><item><title><![CDATA[Pragmatic Minimal Infrastructure]]></title><description><![CDATA[A 2019 article by David Futcher appeared on Hacker News recently titled You Don’t Need All That Complex/Expensive/Distracting Infrastructure…]]></description><link>https://symbioquine.net/2020-03-14-pragmatic-minimal-infrastructure</link><guid isPermaLink="false">https://symbioquine.net/2020-03-14-pragmatic-minimal-infrastructure</guid><category><![CDATA[Operational Excellence]]></category><category><![CDATA[Software Engineering]]></category><pubDate>Sun, 14 Mar 2021 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;A 2019 article by David Futcher &lt;a href=&quot;https://news.ycombinator.com/item?id=26423110&quot;&gt;appeared on Hacker News recently&lt;/a&gt; titled &lt;a href=&quot;https://blog.usejournal.com/you-dont-need-all-that-complex-expensive-distracting-infrastructure-a70dbe0dbccb&quot;&gt;You Don’t Need All That Complex/Expensive/Distracting Infrastructure&lt;/a&gt;.
The article is well written and makes a really important point about building to your actual requirements. It&apos;s hard to over-emphasize &lt;a href=&quot;https://martinfowler.com/bliki/Yagni.html&quot;&gt;YAGNI&lt;/a&gt; at all
levels of coding, software engineering, and operations. Critical thinking about the tradeoffs of increasing the upfront cost - whether in time, cash,
or complexity - is essential to reaching your audience faster and still having the flexibility/budget to respond to the ever-changing playing field.&lt;/p&gt;
&lt;p&gt;It&apos;s important to acknowledge which tradeoffs have recurring concrete costs and which have hypothetical costs. For instance, a typical high availability (HA)
configuration with a load balancer and multiple hosts incurs many costs. It incurs an up-front cost to configure the infrastructure and ongoing hardware/maintenance
costs. It also incurs a complexity cost of deploying to multiple hosts, reasoning about distributed systems, etc. Most of these costs don&apos;t buy you anything on a
day-to-day basis. Your machines will tend to be running smoothly and the network will tend to be stable - at least in the ways your HA setup protects against.
You might never pay the hypothetical cost of an availability zone outage or a host hardware failure.&lt;/p&gt;
&lt;p&gt;That said, you &lt;em&gt;will&lt;/em&gt; have to upgrade your hosts&apos; operating systems, deploy new versions of your software, and troubleshoot hard-to-reproduce behavior from your
system. All of these benefit from building out a little infrastructure.&lt;/p&gt;
&lt;p&gt;For the sake of simplicity let&apos;s assume you&apos;ve taken the argument against infrastructure deeply to heart and your startup&apos;s software is a gzipped folder with
all your web content and some sort of server binary. You &lt;code class=&quot;language-text&quot;&gt;scp&lt;/code&gt; it to your host, unpack, execute, and away you go. Life is good, there&apos;s no complicated container
systems, no build servers, no CD pipelines, no statefulness, just good old-fashioned operations - and presumably all the time in the world to find customers and
market your nascent business.&lt;/p&gt;
&lt;p&gt;You can even get most of the benefits naively associated with having more infrastructure. Need to upgrade a host or deploy your software? No problem, you get to make
the call about whether to risk downtime. You check your logs and try to guess whether any &quot;important customers&quot; are likely to try and use your site. If not, just go
ahead and bounce the host or kill your server process then start a new version. Otherwise, you can spin up a new host, get it set up correctly running your software,
then do a DNS flip and wait for the traffic to move to the new machine before stopping the old one.&lt;/p&gt;
&lt;p&gt;It may take a while and feel repetitive after the third or fourth time, but boring is good right?&lt;/p&gt;
&lt;p&gt;Well, yes and no. The minimalistic strategy I just described is great because it puts you in the driver&apos;s seat and hopefully delivering value to your customers faster.
Where it falls down is that it is an extreme local optimum on the cost vs external value graph. In my opinion, even considering a very small set of externalities can
both erode the advantages of the minimalistic strategy and help offset the costs of a more infrastructure-intensive strategy.&lt;/p&gt;
&lt;p&gt;One of the key aspects to consider is which kinds of growing pains you have control over and can predict/schedule. If your business venture is even a little successful,
you can be sure unforeseen bugs in your software will necessitate &quot;emergency&quot; code changes. You can also be sure you&apos;ll very quickly have enough web traffic that every
deployment will require that new-host/dns-flip strategy or else involve downtime affecting those existing/potential customers. What&apos;s harder to predict is where the
break-even point is on more complex infrastructure - especially since it can itself introduce unforeseen bugs. I would argue though, that paying the cost early on to
get an as-simple-as-possible no-downtime deployment mechanism is worthwhile.&lt;/p&gt;
&lt;p&gt;Should it be prioritized over the bare-minimum work to have a product or web-presence? Probably not. Should it be prioritized along with launching your first few features
or releases? Probably. Once you have any customers, traffic, or value; you have an obligation to respect others&apos; time and yours. In 2021 this means having very few
if any &quot;planned outages&quot; and definitely not having &quot;expected&quot; intermittent downtime for deployments. The tooling is becoming ubiquitous enough and customers discerning
enough that certain kinds of availability form a new baseline.&lt;/p&gt;
&lt;p&gt;Another aspect that should be considered is that there are ancillary benefits to early judicious infrastructure investment. If your business succeeds, your time spent
learning enough NGINX, Kubernetes, etc. to achieve that baseline availability will serve you well by providing foundational competency to evaluate future architectures.
If your business fails there&apos;s a good chance you can re-use the core configuration/scripts/learnings in your next endeavor.&lt;/p&gt;
&lt;p&gt;Finally, there&apos;s a sentiment case to be made for employing &quot;cool&quot; infrastructure that is a good fit for a given use-case and current growth. You probably don&apos;t need
and shouldn&apos;t build the fanciest multi-AZ autoscaling cluster with real-time machine-learning metrics/log analysis. But if a few scripts can give you a satisfying
minimal git-ops workflow for day-to-day deployments which makes you feel like your time is being well spent, it is likely worth it. Not to mention that your &quot;3 AM self&quot;
will thank you if deploying is easy, fast, and makes it hard to break things.&lt;/p&gt;
&lt;p&gt;In short, I too want to see more pragmatic business decisions as opposed to hype-driven over-engineering. However, those decisions need to take into account the
costs of not keeping up with the times.&lt;/p&gt;</content:encoded><author>symbioquine@gmail.com</author></item><item><title><![CDATA[EPever MPPT Solar Charge Controller Monitoring Hardware]]></title><description><![CDATA[Cheaper MPPT solar charge controllers have become ubiquitous. Many of these sport RS232 or RS485/Modbus ports
allowing the controllers to be…]]></description><link>https://symbioquine.net/2020-10-27-epever-esp-8266-controller</link><guid isPermaLink="false">https://symbioquine.net/2020-10-27-epever-esp-8266-controller</guid><category><![CDATA[Solar]]></category><category><![CDATA[Microcontrollers]]></category><category><![CDATA[Off-grid]]></category><pubDate>Tue, 27 Oct 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Cheaper MPPT solar charge controllers have become ubiquitous. Many of these sport &lt;a href=&quot;https://en.wikipedia.org/wiki/RS-232&quot;&gt;RS232&lt;/a&gt; or &lt;a href=&quot;https://en.wikipedia.org/wiki/RS-485&quot;&gt;RS485&lt;/a&gt;/&lt;a href=&quot;https://en.wikipedia.org/wiki/Modbus&quot;&gt;Modbus&lt;/a&gt; ports
allowing the controllers to be extended via proprietary hardware/software for advanced monitoring and control use-cases.&lt;/p&gt;
&lt;p&gt;Since this Spring I have been experimenting with the EPever (EPSolar) line of MPPT solar charge controllers which have RS485 interfaces and thought it would be worthwhile to share my
learnings in the hope they will be useful to others.&lt;/p&gt;
&lt;p&gt;This post will focus on the specific hardware I worked with, however the techniques are applicable to similar hardware.&lt;/p&gt;
&lt;p&gt;At the bottom of this post I have linked to similar projects and build logs - while there are many, I believe the content here adds materially in terms of discussing the downsides of using the Raspberry Pi for this application
and, for the esp8266 part of the build, showing the simpler wiring which results from choosing an RS485 adapter which does automatic flow control.&lt;/p&gt;
&lt;h2 id=&quot;the-first-pi&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#the-first-pi&quot; aria-label=&quot;the first pi permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The First Pi&lt;/h2&gt;
&lt;p&gt;Early in the Spring I was configuring a couple tiny independent solar systems - one to power networking hardware to get internet on an off-grid property from a local &lt;a href=&quot;https://en.wikipedia.org/wiki/Wireless_Internet_service_provider&quot;&gt;WISP&lt;/a&gt;
and another to provide incidental power for the construction phase of my skoolie conversion.&lt;/p&gt;
&lt;p&gt;Naturally, I wanted to capture data on the performance of these systems over time to help gain a more intuitive hands-on understanding of the power small &quot;renewable&quot; energy systems can provide. Also
I anticipate the data will be helpful in understanding the aging of the systems&apos; batteries - and possibly panels.&lt;/p&gt;
&lt;p&gt;My initial attempts involved a Raspberry Pi 3B and a RS485-to-RS232 adapter. I used a bit of python code and the excellent &lt;a href=&quot;https://github.com/Salamek/epsolar-tracer&quot;&gt;epsolar-tracer&lt;/a&gt; library to poll the
Tracer 3210AN and publishing metrics to &lt;a href=&quot;https://graphiteapp.org/&quot;&gt;Carbon/Graphite&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;After a fairly steep learning curve with half-duplex RS485 adapters, I got that working and was pleased to have some day-over-day performance data.&lt;/p&gt;
&lt;p&gt;At this point my main complaint was that since only one device can connect to the RS485 port at a time, I couldn&apos;t have both remote monitoring and the handy &lt;a href=&quot;https://www.epsolarpv.com/product/55.html&quot;&gt;MT-50&lt;/a&gt; connected simultaneously.&lt;/p&gt;
&lt;h2 id=&quot;the-second-pi&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#the-second-pi&quot; aria-label=&quot;the second pi permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The Second Pi&lt;/h2&gt;
&lt;p&gt;I set out to figure out how to get both the local display and remote monitoring working at the same time.&lt;/p&gt;
&lt;p&gt;Since the Raspberry Pi only has 1 hardware serial port, I got some &lt;a href=&quot;https://www.amazon.com/dp/B00LZV1G6K/&quot;&gt;USB serial adapters&lt;/a&gt; and decided to proxy requests from the MT-50 while still polling for data to publish to Carbon.&lt;/p&gt;
&lt;p&gt;Proxying the requests was unexpectedly complicated because I discovered that the MT-50 doesn&apos;t read data via the &lt;a href=&quot;http://www.solar-elektro.cz/data/dokumenty/1733_modbus_protocol.pdf&quot;&gt;documented modbus commands&lt;/a&gt;.
Most important of the undocumented commands the MT-50 uses is one for reading sparse/discontiguous registers which I have documented in &lt;a href=&quot;https://gist.github.com/symbioquine/95ba2abaf046c8e034b41e4cf3c334a9&quot;&gt;this gist&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;With the protocol bits figured out and a nice watertight box, I had a passable system component which publishes metrics and still allows the local display to work.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7e28122fe2d5b6daba704bcdedc5a5d6/72e01/second_pi.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 75.14450867052024%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAXCYCH2av//EABoQAAIDAQEAAAAAAAAAAAAAAAECABESIQT/2gAIAQEAAQUCE1Xo4Z0B8WjWv//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAEDBQEAAAAAAAAAAAAAAAABITEQERIiMqH/2gAIAQEABj8Cgy2t5Tk6dFGg/8QAHBAAAwACAwEAAAAAAAAAAAAAAAERMUFRYZHB/9oACAEBAAE/IZX3R17TUG1FYdNdMfJkY0/CQ54H/9oADAMBAAIAAwAAABCPD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQWFxwdH/2gAIAQEAAT8QzASG0AlxDYGBoFjfVwBxoxbkxyfuokhjrFR4StC1byGPs//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;A Raspberry Pi in a watertight box with dual usb-serial and RS232-to-RS485 adapters&quot;
        title=&quot;A Raspberry Pi in a watertight box with dual usb-serial and RS232-to-RS485 adapters&quot;
        src=&quot;/static/7e28122fe2d5b6daba704bcdedc5a5d6/15ec7/second_pi.jpg&quot;
        srcset=&quot;/static/7e28122fe2d5b6daba704bcdedc5a5d6/9ac50/second_pi.jpg 173w,
/static/7e28122fe2d5b6daba704bcdedc5a5d6/8d48c/second_pi.jpg 345w,
/static/7e28122fe2d5b6daba704bcdedc5a5d6/15ec7/second_pi.jpg 690w,
/static/7e28122fe2d5b6daba704bcdedc5a5d6/72e01/second_pi.jpg 1024w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Unfortunately, there were still several issues with this strategy;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Raspberry Pi fail due to how quickly SD cards wear out and result in filesystem corruption - this is supposedly surmountable by limiting or completely disabling writes, but I haven&apos;t figured out how to do this while still
keep the ability to remotely push control-program/OS updates&lt;/li&gt;
&lt;li&gt;Raspberry Pi use quite a bit of energy - over 1 watt &lt;a href=&quot;http://www.pidramble.com/wiki/benchmarks/power-consumption&quot;&gt;even idle&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;The easiest way I found to securely publish to Carbon was via an SSH tunnel which adds unnecessary complexity and failure-points&lt;/li&gt;
&lt;li&gt;The Raspberry Pi is powered from the &apos;load&apos; output of the charge controller - meaning the Pi can&apos;t be used for toggling power to the load without also turning itself off&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;and-now-for-something-a-little-different&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#and-now-for-something-a-little-different&quot; aria-label=&quot;and now for something a little different permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;And Now for Something A Little Different&lt;/h2&gt;
&lt;p&gt;I decided to drop the Raspberry Pi and MT-50 in favor of a much simpler component built around the esp8266. This has a number of advantages;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Low power - I haven&apos;t spent much effort optimizing here, but it seems to be on the order of half a watt under load&lt;/li&gt;
&lt;li&gt;Reliability - there are many fewer points of failure without the complexities of a full OS/filesystem/etc while still supporting remote updates&lt;/li&gt;
&lt;li&gt;1 plug - since the esp8266 uses so little power, it can powered directly via the charge controller&apos;s RS485 port allowing for the unit to remain powered even when the charge controller load output is off&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Maintaining the ssh tunnel from the esp8266 didn&apos;t seem practical so I switched to publishing the metrics to an authenticated InfluxDB endpoint over HTTPS.&lt;/p&gt;
&lt;h3 id=&quot;materials&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#materials&quot; aria-label=&quot;materials permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Materials&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2b0d73af4c758816812455437f86e967/2b013/materials.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.95953757225434%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABc0leGyhX/8QAHBAAAgAHAAAAAAAAAAAAAAAAAQIAAxAREjEz/9oACAEBAAEFAsSYM0Kwe9H7Lr//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAACAgMBAAAAAAAAAAAAAAABEQAQITFxgf/aAAgBAQAGPwJMj2LLM1Q4a//EABsQAQADAQADAAAAAAAAAAAAAAEAESExEJHw/9oACAEBAAE/ISwh302ypbAvcyObT7labBr9Z4f/2gAMAwEAAgADAAAAEOvP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8QR//EAB4QAAICAgIDAAAAAAAAAAAAAAERACExQVFhgbHw/9oACAEBAAE/EHQW1xbfQ1EMDBsAQeG4lwfnELFYI63B57Hti4UMz//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Consumable materials used in this build&quot;
        title=&quot;Consumable materials used in this build&quot;
        src=&quot;/static/2b0d73af4c758816812455437f86e967/15ec7/materials.jpg&quot;
        srcset=&quot;/static/2b0d73af4c758816812455437f86e967/9ac50/materials.jpg 173w,
/static/2b0d73af4c758816812455437f86e967/8d48c/materials.jpg 345w,
/static/2b0d73af4c758816812455437f86e967/15ec7/materials.jpg 690w,
/static/2b0d73af4c758816812455437f86e967/af659/materials.jpg 1035w,
/static/2b0d73af4c758816812455437f86e967/89b2d/materials.jpg 1380w,
/static/2b0d73af4c758816812455437f86e967/2b013/materials.jpg 1700w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.amazon.com/dp/B081CSJV2V/&quot;&gt;ESP8266&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.amazon.com/dp/B082Y19KV9/&quot;&gt;Automatic Flow Control UART to RS485 Converter&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.amazon.com/dp/B07K7445H5/&quot;&gt;RJ45 Waterproof Coupler&lt;/a&gt; - There are probably more cost effective options and the threads are a little fragile on these&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.thermofisher.com/order/catalog/product/2118-0008&quot;&gt;Nalgene 2118-0008&lt;/a&gt; - Any convenient container should also work&lt;/li&gt;
&lt;li&gt;5 Female jumper wires&lt;/li&gt;
&lt;li&gt;~4 inches of ethernet cable with one end installed&lt;/li&gt;
&lt;li&gt;Ethernet cable to connect assembled device to the charge controller&lt;/li&gt;
&lt;li&gt;Solder&lt;/li&gt;
&lt;li&gt;Tools&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;the-build&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#the-build&quot; aria-label=&quot;the build permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The Build&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/590d0a621de6429fd181959e68927812/a878e/diagram_wiring.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.86705202312138%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAuBAAALgQETQ8PIAAAB2klEQVQoz52SW2sTQRiG8z+0eEhpMRhiL7TWEwiKN1KQUhSpt16IECSaGxWNYk2LFQX9D2JzpaKFaG2iUSgqosRsswrxYmF7MNmkuptsdudxNmsMRkH0hXcO3zDPN9/MBIQQtO1JNBqgLyJqNdxKRdr40fumWkMYFYQ3Nk0aS8vYKytgGDJuEKBbTUGzvIwjLDlxvRS/LjdWf44fP0lz8/o4yWSCl9ksWBYB13FR1QIflDcsqO+oGTqmVkQt5Llx+xZXxhNMTk2QnLzKxNQ1PiqvMWufWf1SYuzIMH29PQSDa7l4JibzuwTq9TozDx/w6P495mTGUrGIJqF30mmG9u9j++5t7Ny7i/5wiNBAhGcvZihpeQqfioyODhOJhBjcGub82Xjr1AFXUlVlgcLb96j5Ao5ptxYWy0uk5zJknmeZfzXPbDZD+uks1arhl+7YjB0doT/Yw2AkyIVzp32g11h1C1P6q/lN3pq8MyH4m5q2zYnjxzi0ZwtDmzcSjZ70gaJ7s8fDf3XHcX6zV5En225weOQgB3aEGdi0jnj8VAfY7Rb3D/GO/dyxWJRQ33p6N6zh0uVEp+R/kQdsn1JRFFKpaVLTd8nlcv8PbFdhyX+n6zqaplEul1ux7/rnvar/3rA8AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Wiring diagram showing RS485 connection through adapter to ESP8266&quot;
        title=&quot;Wiring diagram showing RS485 connection through adapter to ESP8266&quot;
        src=&quot;/static/590d0a621de6429fd181959e68927812/1e043/diagram_wiring.png&quot;
        srcset=&quot;/static/590d0a621de6429fd181959e68927812/991de/diagram_wiring.png 173w,
/static/590d0a621de6429fd181959e68927812/e4d6b/diagram_wiring.png 345w,
/static/590d0a621de6429fd181959e68927812/1e043/diagram_wiring.png 690w,
/static/590d0a621de6429fd181959e68927812/e3189/diagram_wiring.png 1035w,
/static/590d0a621de6429fd181959e68927812/b1001/diagram_wiring.png 1380w,
/static/590d0a621de6429fd181959e68927812/a878e/diagram_wiring.png 2048w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Start by stripping about 2&quot; of the outer ethernet cable housing and removing the striped wires. The ground and +5v - brown and orange respectively - are left long while the RS485 A/B wires are trimmed short.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6ec658c181f0a0e20235545aed2fbe53/40317/inner_cable_prep.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 41.61849710982659%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdGYWg//xAAYEAEAAwEAAAAAAAAAAAAAAAABABARE//aAAgBAQABBQLkkNK//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQACEDIzgf/aAAgBAQAGPwLVyuTyP//EABkQAQADAQEAAAAAAAAAAAAAAAEAESFxgf/aAAgBAQABPyEUoN8ganwIGa3P/9oADAMBAAIAAwAAABCL/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhMVFxkf/aAAgBAQABPxAqQlqkF9jEDnWqvI5kLlxP/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Detail image showing preparation of the cable for connection to the RS485 adapter&quot;
        title=&quot;Detail image showing preparation of the cable for connection to the RS485 adapter&quot;
        src=&quot;/static/6ec658c181f0a0e20235545aed2fbe53/15ec7/inner_cable_prep.jpg&quot;
        srcset=&quot;/static/6ec658c181f0a0e20235545aed2fbe53/9ac50/inner_cable_prep.jpg 173w,
/static/6ec658c181f0a0e20235545aed2fbe53/8d48c/inner_cable_prep.jpg 345w,
/static/6ec658c181f0a0e20235545aed2fbe53/15ec7/inner_cable_prep.jpg 690w,
/static/6ec658c181f0a0e20235545aed2fbe53/af659/inner_cable_prep.jpg 1035w,
/static/6ec658c181f0a0e20235545aed2fbe53/89b2d/inner_cable_prep.jpg 1380w,
/static/6ec658c181f0a0e20235545aed2fbe53/40317/inner_cable_prep.jpg 2795w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Next the RS485 adapter is grounded.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bbb861be4270e4bc10bd42e87f44cc35/1cd85/wiring_rs485_adapter.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 70.52023121387285%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAByxW5E4aI/8QAGhAAAwADAQAAAAAAAAAAAAAAAAEDAhARE//aAAgBAQABBQK2VXXzoxT4ND1//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAQIHAAAAAAAAAAAAAAAAEQABAhIgMkFRgf/aAAgBAQAGPwKRjCx0rh1Zo//EABsQAQACAgMAAAAAAAAAAAAAAAEAESGBEDGR/9oACAEBAAE/Ia94KztuUMr2YIpVvgETM//aAAwDAQACAAMAAAAQh/8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAAICAgMAAAAAAAAAAAAAAQARIUExYXGRsf/aAAgBAQABPxBZhtcvfyjiarfxAHtl2LzaoFhozDIUf//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Detail image showing one approach for grounding the RS485 adapter&quot;
        title=&quot;Detail image showing one approach for grounding the RS485 adapter&quot;
        src=&quot;/static/bbb861be4270e4bc10bd42e87f44cc35/15ec7/wiring_rs485_adapter.jpg&quot;
        srcset=&quot;/static/bbb861be4270e4bc10bd42e87f44cc35/9ac50/wiring_rs485_adapter.jpg 173w,
/static/bbb861be4270e4bc10bd42e87f44cc35/8d48c/wiring_rs485_adapter.jpg 345w,
/static/bbb861be4270e4bc10bd42e87f44cc35/15ec7/wiring_rs485_adapter.jpg 690w,
/static/bbb861be4270e4bc10bd42e87f44cc35/af659/wiring_rs485_adapter.jpg 1035w,
/static/bbb861be4270e4bc10bd42e87f44cc35/89b2d/wiring_rs485_adapter.jpg 1380w,
/static/bbb861be4270e4bc10bd42e87f44cc35/1cd85/wiring_rs485_adapter.jpg 2058w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Then jumper wires are added to the adapter and the whole thing is assembled into the case.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1f51e020e1b0fc4e5d5838b537f4bd2a/23d91/fully_assembled_cable_and_lid.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.28901734104046%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAa7qOQHD/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAECEQMQEv/aAAgBAQABBQLnK5VOxaZ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAATEAAhEgQf/aAAgBAQAGPwI3NUhmci0//8QAGhAAAgMBAQAAAAAAAAAAAAAAAAERITEQcf/aAAgBAQABPyFLemMdWJUse6XxeGj/2gAMAwEAAgADAAAAEIgv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAMBAQEAAAAAAAAAAAAAAQARMSGxgf/aAAgBAQABPxBiBRUldK/OxIq5BS+AirvsJkm81n//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Image showing the assembled case lid, cable, adapter, and jumper wires&quot;
        title=&quot;Image showing the assembled case lid, cable, adapter, and jumper wires&quot;
        src=&quot;/static/1f51e020e1b0fc4e5d5838b537f4bd2a/15ec7/fully_assembled_cable_and_lid.jpg&quot;
        srcset=&quot;/static/1f51e020e1b0fc4e5d5838b537f4bd2a/9ac50/fully_assembled_cable_and_lid.jpg 173w,
/static/1f51e020e1b0fc4e5d5838b537f4bd2a/8d48c/fully_assembled_cable_and_lid.jpg 345w,
/static/1f51e020e1b0fc4e5d5838b537f4bd2a/15ec7/fully_assembled_cable_and_lid.jpg 690w,
/static/1f51e020e1b0fc4e5d5838b537f4bd2a/af659/fully_assembled_cable_and_lid.jpg 1035w,
/static/1f51e020e1b0fc4e5d5838b537f4bd2a/89b2d/fully_assembled_cable_and_lid.jpg 1380w,
/static/1f51e020e1b0fc4e5d5838b537f4bd2a/23d91/fully_assembled_cable_and_lid.jpg 3556w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Here is the fully assembled unit connected and powered up.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/84aa1f68cb564bcf56af21a1dcf9bc1e/c293a/final_all_connected.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 97.68786127167631%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBAEF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAGduO7N8xIaag4E/8QAGxABAQACAwEAAAAAAAAAAAAAAQIAAxESEyL/2gAIAQEAAQUCQMug13RdW7Lzj62T1q7R9qx2Ln//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAdEAACAQQDAAAAAAAAAAAAAAAAAREQISJBEzFx/9oACAEBAAY/ArrEbjomII4y6xovDRo//8QAHBABAAICAwEAAAAAAAAAAAAAAQARIUExUZGB/9oACAEBAAE/IeNUPeYGByKJcD+pnVK31FWBsZmADCXH3De0u14i9p4n/9oADAMBAAIAAwAAABDzL4P/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxAYz//EABYRAAMAAAAAAAAAAAAAAAAAABEgIf/aAAgBAgEBPxAVP//EAB0QAQEAAgIDAQAAAAAAAAAAAAERACExYUFRwbH/2gAIAQEAAT8Q0OiVdF/c2ImgbV+4wYQE2veKFySHhee8VZopdXw+sfSwA9XCPSiVLDeOkudp+5cOyY//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Image showing the fully assembled unit connected and powered up&quot;
        title=&quot;Image showing the fully assembled unit connected and powered up&quot;
        src=&quot;/static/84aa1f68cb564bcf56af21a1dcf9bc1e/15ec7/final_all_connected.jpg&quot;
        srcset=&quot;/static/84aa1f68cb564bcf56af21a1dcf9bc1e/9ac50/final_all_connected.jpg 173w,
/static/84aa1f68cb564bcf56af21a1dcf9bc1e/8d48c/final_all_connected.jpg 345w,
/static/84aa1f68cb564bcf56af21a1dcf9bc1e/15ec7/final_all_connected.jpg 690w,
/static/84aa1f68cb564bcf56af21a1dcf9bc1e/af659/final_all_connected.jpg 1035w,
/static/84aa1f68cb564bcf56af21a1dcf9bc1e/c293a/final_all_connected.jpg 1232w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Note: for initial programming via USB it is necessary to disconnect the green (RX) wire from the esp8266. After initial programming, OTA updates can be used to avoid that step.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;In a future post I will share some sample code and provide power usage benchmarks.&lt;/p&gt;
&lt;h2 id=&quot;related-work-of-others&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#related-work-of-others&quot; aria-label=&quot;related work of others permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Related Work of Others&lt;/h2&gt;
&lt;h3 id=&quot;raspberry-pi&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#raspberry-pi&quot; aria-label=&quot;raspberry pi permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Raspberry Pi&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.rototron.info/raspberry-pi-solar-serial-rest-api-tutorial/&quot;&gt;https://www.rototron.info/raspberry-pi-solar-serial-rest-api-tutorial/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/a/57351990&quot;&gt;https://stackoverflow.com/a/57351990&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.navitron.org.uk/forum/index.php?topic=26987.0&quot;&gt;https://www.navitron.org.uk/forum/index.php?topic=26987.0&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://diysolarforum.com/threads/off-grid-solar-battery-monitoring-and-control-freeware.6662/&quot;&gt;https://diysolarforum.com/threads/off-grid-solar-battery-monitoring-and-control-freeware.6662/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;esp8266&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#esp8266&quot; aria-label=&quot;esp8266 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ESP8266&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.eevblog.com/forum/projects/nodemcu-esp8266-rs485-epever-solar-monitor-diy/&quot;&gt;https://www.eevblog.com/forum/projects/nodemcu-esp8266-rs485-epever-solar-monitor-diy/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.hackster.io/tekk/cheap-mppt-controller-live-stats-on-mobile-3db5be&quot;&gt;https://www.hackster.io/tekk/cheap-mppt-controller-live-stats-on-mobile-3db5be&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.instructables.com/Wireless-Solar-Charge-Controller-Monitor-RS485-to-/&quot;&gt;https://www.instructables.com/Wireless-Solar-Charge-Controller-Monitor-RS485-to-/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded><author>symbioquine@gmail.com</author></item></channel></rss>