{"componentChunkName":"component---src-templates-post-js","path":"/2022-09-28-github-actions-drupal-module-build-step/","result":{"data":{"markdownRemark":{"html":"<p>Sometimes CI architectures are more a product of circumstance than we'd like. The strategy described in this post is a prime example of that.</p>\n<p>Many Drupal modules don't require a build step, typically they are just some PHP, yaml, and maybe some Twig/JS/CSS files all checked-in. Those\nfiles then directly form the contents of the release for the module.</p>\n<p>Drupal.org's infrastructure is tailored to that style of module. Internally Drupal.org uses an instance of GitLab to host the source code for\neach module. Project maintainers tag releases in GitLab then manually create releases at the project level which then become the installable\nversions for the Composer \"drupal/\" prefix. (See the <a href=\"https://www.drupal.org/docs/develop/using-composer/manage-dependencies\">Drupal docs on using Composer</a>.)</p>\n<p>Unfortunately, there's another style of module which doesn't seem to be well served by the current Drupal.org infrastructure - modules which\nneed an arbitrary build step. The example I am going to use in this post is a module that includes some Javascript code that is built with\n<a href=\"https://webpack.js.org/\">Webpack</a>.</p>\n<h3 id=\"project-setup--code\" style=\"position:relative;\"><a href=\"#project-setup--code\" aria-label=\"project setup  code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Project Setup / Code</h3>\n<p>To start off, create a new GitHub repository and Drupal.org module project. For clarity and convenience, I recommend making the GitHub repository\nname and the Drupal.org project \"short name\" the same. For that, the name needs to follow the Drupal\n<a href=\"https://www.drupal.org/docs/creating-custom-modules/naming-and-placing-your-drupal-module\">conventions for module naming</a> - basically just\nalphanumeric characters and underscores. I've chosen to call my example for this tutorial \"symbioquine_dot_net_built_drupal_module_example\".</p>\n<ul>\n<li><a href=\"https://github.com/symbioquine/symbioquine_dot_net_built_drupal_module_example\">https://github.com/symbioquine/symbioquine_dot_net_built_drupal_module_example</a></li>\n<li><a href=\"https://www.drupal.org/project/symbioquine_dot_net_built_drupal_module_example\">https://www.drupal.org/project/symbioquine_dot_net_built_drupal_module_example</a></li>\n</ul>\n<p>I let GitHub generate a default branch, readme, and <code class=\"language-text\">.gitignore</code> file. Then I renamed the branch from <code class=\"language-text\">main</code> to <code class=\"language-text\">release</code> - this will be important\nlater since our GitHub workflow will update that branch using the results of our automated build when we push specific tags to the development branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token function\">git</span> clone https://github.com/symbioquine/symbioquine_dot_net_built_drupal_module_example\n<span class=\"token function\">git</span> checkout <span class=\"token parameter variable\">-b</span> development</code></pre></div>\n<h4 id=\"code-classlanguage-textsrcmainjscode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textsrcmainjscode\" aria-label=\"code classlanguage textsrcmainjscode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">src/main.js</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Wait until all attached Drupal libraries get loaded</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'DOMContentLoaded'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#example-page-app'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello world!\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4 id=\"code-classlanguage-textpackagejsoncode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textpackagejsoncode\" aria-label=\"code classlanguage textpackagejsoncode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">package.json</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"symbioquine_dot_net_built_drupal_module_example\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A module showing how to automatically build JS code with Webpack and push releases to Drupal.org\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"GPL-3.0-or-later\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"repository\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"git\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/symbioquine/symbioquine_dot_net_built_drupal_module_example.git\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack --config webpack.config.js --mode production\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"webpack\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^5.36.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"webpack-cli\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^4.6.0\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"code-classlanguage-textwebpackconfigjscode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textwebpackconfigjscode\" aria-label=\"code classlanguage textwebpackconfigjscode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">webpack.config.js</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">'built_drupal_module_example'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string-property property\">'import'</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/main.js</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/drupal_module_src/js</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">'[name].js'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">clean</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4 id=\"code-classlanguage-textdrupal_module_srccomposerjsoncode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textdrupal_module_srccomposerjsoncode\" aria-label=\"code classlanguage textdrupal_module_srccomposerjsoncode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">drupal_module_src/composer.json</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"symbioquine/symbioquine_dot_net_built_drupal_module_example\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A module showing how to automatically build JS code with Webpack and push releases to Drupal.org\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"drupal-module\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"homepage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/symbioquine/symbioquine_dot_net_built_drupal_module_example\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"authors\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Symbioquine\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"homepage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/symbioquine\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"role\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Maintainer\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"support\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"issues\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/symbioquine/symbioquine_dot_net_built_drupal_module_example/issues\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"source\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/symbioquine/symbioquine_dot_net_built_drupal_module_example\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"GPL-3.0-or-later\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"minimum-stability\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dev\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"code-classlanguage-textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_exampleinfoymlcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_exampleinfoymlcode\" aria-label=\"code classlanguage textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_exampleinfoymlcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">drupal_module_src/symbioquine_dot_net_built_drupal_module_example.info.yml</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Symbioquine.net Built Drupal Module Example\n<span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> This module shows an example of how to automatically build JS code with Webpack and push releases to Drupal.org\n<span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> module\n<span class=\"token key atrule\">package</span><span class=\"token punctuation\">:</span> Example\n<span class=\"token key atrule\">core_version_requirement</span><span class=\"token punctuation\">:</span> ^9\n</code></pre></div>\n<h4 id=\"code-classlanguage-textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_examplelibrariesymlcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_examplelibrariesymlcode\" aria-label=\"code classlanguage textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_examplelibrariesymlcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">drupal_module_src/symbioquine_dot_net_built_drupal_module_example.libraries.yml</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">built_drupal_module_example</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">js</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">js/built_drupal_module_example.js</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">preprocess</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n      <span class=\"token key atrule\">minified</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n</code></pre></div>\n<h4 id=\"code-classlanguage-textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_exampleroutingymlcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_exampleroutingymlcode\" aria-label=\"code classlanguage textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_exampleroutingymlcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">drupal_module_src/symbioquine_dot_net_built_drupal_module_example.routing.yml</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">symbioquine_dot_net_built_drupal_module_example_page.content</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'/symbioquine_dot_net_built_drupal_module_example'</span>\n  <span class=\"token key atrule\">defaults</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">_controller</span><span class=\"token punctuation\">:</span> symbioquine_dot_net_built_drupal_module_example.top_level_controller<span class=\"token punctuation\">:</span>content\n    <span class=\"token key atrule\">_title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Example Page'</span>\n  <span class=\"token key atrule\">requirements</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">_permission</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'access content'</span>\n</code></pre></div>\n<h4 id=\"code-classlanguage-textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_exampleservicesymlcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_exampleservicesymlcode\" aria-label=\"code classlanguage textdrupal_module_srcsymbioquine_dot_net_built_drupal_module_exampleservicesymlcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">drupal_module_src/symbioquine_dot_net_built_drupal_module_example.services.yml</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">symbioquine_dot_net_built_drupal_module_example.top_level_controller</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">class</span><span class=\"token punctuation\">:</span> Drupal\\symbioquine_dot_net_built_drupal_module_example\\Controller\\ExamplePageController\n    <span class=\"token key atrule\">arguments</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h4 id=\"code-classlanguage-textdrupal_module_srcsrccontrollerexamplepagecontrollerphpcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textdrupal_module_srcsrccontrollerexamplepagecontrollerphpcode\" aria-label=\"code classlanguage textdrupal_module_srcsrccontrollerexamplepagecontrollerphpcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">drupal_module_src/src/Controller/ExamplePageController.php</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">Drupal<span class=\"token punctuation\">\\</span>symbioquine_dot_net_built_drupal_module_example<span class=\"token punctuation\">\\</span>Controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">Drupal<span class=\"token punctuation\">\\</span>Core<span class=\"token punctuation\">\\</span>Controller<span class=\"token punctuation\">\\</span>ControllerBase</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Defines ExamplePageController class.\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">ExamplePageController</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ControllerBase</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">/**\n   * Constructs a new ExamplePageController object.\n   *\n   */</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/**\n   * Top-level handler for demo page requests.\n   */</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">content</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string single-quoted-string\">'app'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string single-quoted-string\">'#markup'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'&lt;div id=\"example-page-app\">&lt;/div>'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'#attached'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n          <span class=\"token string single-quoted-string\">'library'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string single-quoted-string\">'symbioquine_dot_net_built_drupal_module_example/built_drupal_module_example'</span>\n          <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h4 id=\"code-classlanguage-textgithubworkflowscreate-releaseymlcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textgithubworkflowscreate-releaseymlcode\" aria-label=\"code classlanguage textgithubworkflowscreate releaseymlcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">.github/workflows/create-release.yml</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Sequence of patterns matched against refs/tags</span>\n    <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">'unbuilt-v*'</span> <span class=\"token comment\"># Push events to matching unbuilt-v*, i.e. unbuilt-v1.0.0</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Create Release\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set RELEASE_VERSION environment variable\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> echo \"RELEASE_VERSION=$<span class=\"token punctuation\">{</span>GITHUB_REF<span class=\"token punctuation\">:</span><span class=\"token number\">19</span><span class=\"token punctuation\">}</span>\" <span class=\"token punctuation\">></span><span class=\"token punctuation\">></span> $GITHUB_ENV\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout code\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> main\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout release branch\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> release\n          <span class=\"token key atrule\">ref</span><span class=\"token punctuation\">:</span> release\n          <span class=\"token key atrule\">fetch-depth</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v1\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'16.x'</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> NPM Build\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          cd ./main/\n          npm ci\n          npm run build</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Copy Module to Release Working Dir\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          # Don't let stale build artifacts accumulate in our release branch\n          rm -rf ./release/js\n          cp ./main/{README.md,CHANGELOG.md,LICENSE} ./release/\n          cp -r ./main/drupal_module_src/* ./release/</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Push Changes to Release Branch and Tag\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          cd ./release\n          git config user.name github-actions\n          git config user.email github-actions@github.com\n          git add .\n          git commit -m \"Release ${{ env.RELEASE_VERSION }}\"\n          git tag ${{ env.RELEASE_VERSION }}\n          git push --atomic origin HEAD:release ${{ env.RELEASE_VERSION }}</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup SSH Keys and known_hosts for drupal.org\n        <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">SSH_AUTH_SOCK</span><span class=\"token punctuation\">:</span> /tmp/ssh_agent.sock\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          mkdir -p ~/.ssh/\n          echo \"${{ secrets.DRUPAL_DOT_ORG_SSH_KNOWN_HOSTS }}\" >> ~/.ssh/known_hosts\n          ssh-agent -a $SSH_AUTH_SOCK > /dev/null\n          ssh-add - &lt;&lt;&lt; \"${{ secrets.DRUPAL_DOT_ORG_SSH_PRIVATE_KEY }}\"</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Push Changes to Release Branch and Tag on drupal.org Gitlab\n        <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">SSH_AUTH_SOCK</span><span class=\"token punctuation\">:</span> /tmp/ssh_agent.sock\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n          cd ./release\n          git config user.name github-actions\n          git config user.email github-actions@github.com\n          git remote add drupal-dot-org git@git.drupal.org:project/symbioquine_dot_net_built_drupal_module_example.git\n          git fetch drupal-dot-org\n          git push --tags --force drupal-dot-org 'HEAD:refs/heads/release'</span>\n</code></pre></div>\n<h3 id=\"test-build\" style=\"position:relative;\"><a href=\"#test-build\" aria-label=\"test build permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Test Build</h3>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span>\n<span class=\"token function\">npm</span> run build</code></pre></div>\n<h3 id=\"drupalorg-gitlab-deploy-key-setup\" style=\"position:relative;\"><a href=\"#drupalorg-gitlab-deploy-key-setup\" aria-label=\"drupalorg gitlab deploy key setup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Drupal.org GitLab Deploy Key Setup</h3>\n<p>Add a new Deploy key to the Drupal.org GitLab for the project. For my example this is at <code class=\"language-text\">https://git.drupalcode.org/project/symbioquine_dot_net_built_drupal_module_example/-/settings/repository</code>.</p>\n<p>I've been using the RSA key generation instructions from <a href=\"https://git.drupalcode.org/help/user/ssh\">https://git.drupalcode.org/help/user/ssh</a></p>\n<p>e.g.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ ssh-keygen <span class=\"token parameter variable\">-t</span> rsa <span class=\"token parameter variable\">-b</span> <span class=\"token number\">2048</span> <span class=\"token parameter variable\">-C</span> <span class=\"token string\">\"symbioquine_dot_net_built_drupal_module_example drupal.org Gitlab deploy key\"</span>\nGenerating public/private rsa key pair.\nEnter <span class=\"token function\">file</span> <span class=\"token keyword\">in</span> <span class=\"token function\">which</span> to save the key <span class=\"token punctuation\">(</span>/home/symbioquine/.ssh/id_rsa<span class=\"token punctuation\">)</span>: /home/symbioquine/.ssh/symbioquine_dot_net_built_drupal_module_example\nEnter passphrase <span class=\"token punctuation\">(</span>empty <span class=\"token keyword\">for</span> no passphrase<span class=\"token punctuation\">)</span>:\nEnter same passphrase again:\nYour identification has been saved <span class=\"token keyword\">in</span> /home/symbioquine/.ssh/symbioquine_dot_net_built_drupal_module_example\nYour public key has been saved <span class=\"token keyword\">in</span> /home/symbioquine/.ssh/symbioquine_dot_net_built_drupal_module_example.pub\nThe key fingerprint is:\nSHA256:YmArT17dAmWhTRKPYL6DHrBBktL6pC1hbTf1f+edWaI symbioquine_dot_net_built_drupal_module_example drupal.org Gitlab deploy key\nThe key's randomart image is:\n+---<span class=\"token punctuation\">[</span>RSA <span class=\"token number\">2048</span><span class=\"token punctuation\">]</span>----+\n<span class=\"token operator\">|</span>.+  o o.<span class=\"token operator\">=</span>.       <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span><span class=\"token operator\">=</span> .o <span class=\"token builtin class-name\">.</span> @         <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>+<span class=\"token punctuation\">..</span> + <span class=\"token operator\">=</span> +        <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span><span class=\"token assign-left variable\">o</span><span class=\"token operator\">=</span>.<span class=\"token operator\">=</span> * o o       <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>o*<span class=\"token operator\">=</span> * <span class=\"token operator\">=</span> S o      <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>o.o* + <span class=\"token builtin class-name\">.</span> <span class=\"token builtin class-name\">.</span> <span class=\"token builtin class-name\">.</span> <span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token punctuation\">..</span> o       <span class=\"token punctuation\">..</span>o.<span class=\"token operator\">=</span><span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>            E  +.<span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>                 <span class=\"token operator\">|</span>\n+----<span class=\"token punctuation\">[</span>SHA256<span class=\"token punctuation\">]</span>-----+</code></pre></div>\n<p>Then I copied the contents of <code class=\"language-text\">/home/symbioquine/.ssh/symbioquine_dot_net_built_drupal_module_example.pub</code> into a new Drupal.org GitLab deploy key. Make sure\nto check the box that says \"Grant write permissions to this key\" since we'll be using that key to push releases into the Drupal.org GitLab repo.</p>\n<h3 id=\"github-secrets-setup\" style=\"position:relative;\"><a href=\"#github-secrets-setup\" aria-label=\"github secrets setup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHub Secrets Setup</h3>\n<p>Add two new secrets for GitHub Actions. For my example these are added at <code class=\"language-text\">https://github.com/symbioquine/symbioquine_dot_net_built_drupal_module_example/settings/secrets/actions</code>.</p>\n<p>First I copied the contents of <code class=\"language-text\">/home/symbioquine/.ssh/symbioquine_dot_net_built_drupal_module_example</code> into a secret named <code class=\"language-text\">DRUPAL_DOT_ORG_SSH_PRIVATE_KEY</code>.</p>\n<p>Next I copied the output of running <code class=\"language-text\">ssh-keyscan git.drupal.org</code> into a secret named <code class=\"language-text\">DRUPAL_DOT_ORG_SSH_KNOWN_HOSTS</code>.</p>\n<h3 id=\"tag-and-push-initial-release\" style=\"position:relative;\"><a href=\"#tag-and-push-initial-release\" aria-label=\"tag and push initial release permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tag and Push Initial Release</h3>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"node_modules\"</span> <span class=\"token operator\">>></span> .gitignore\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"drupal_module_src/js\"</span> <span class=\"token operator\">>></span> .gitignore\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token parameter variable\">-A</span>\n<span class=\"token function\">git</span> commit <span class=\"token parameter variable\">-m</span> <span class=\"token string\">\"Release 1.0.0\"</span>\n<span class=\"token function\">git</span> tag unbuilt-v1.0.0\n<span class=\"token function\">git</span> push <span class=\"token parameter variable\">--atomic</span> origin HEAD:development unbuilt-v1.0.0</code></pre></div>\n<h3 id=\"create-drupalorg-release\" style=\"position:relative;\"><a href=\"#create-drupalorg-release\" aria-label=\"create drupalorg release permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create Drupal.org release</h3>\n<p>Once the GitHub Actions workflow completes a new <code class=\"language-text\">1.0.0</code> tag will have been created on the Drupal.org GitLab for the project.</p>\n<p>Then I go to the project page on Drupal.org and create the corresponding release.</p>\n<h3 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h3>\n<p>Now we have a Drupal module with JS code built via GitHub actions and installable via the <code class=\"language-text\">drupal/</code> composer prefix;</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token function\">composer</span> require drupal/symbioquine_dot_net_built_drupal_module_example\ndrush en symbioquine_dot_net_built_drupal_module_example</code></pre></div>\n<p>Once installed, the example page can be accessed under the Drupal site at <code class=\"language-text\">/symbioquine_dot_net_built_drupal_module_example</code>. e.g. <a href=\"https://drupal.example.com/symbioquine_dot_net_built_drupal_module_example\">https://drupal.example.com/symbioquine_dot_net_built_drupal_module_example</a></p>\n<p>The full source of this example can be found in the GitHub repository at <a href=\"https://github.com/symbioquine/symbioquine_dot_net_built_drupal_module_example\">https://github.com/symbioquine/symbioquine_dot_net_built_drupal_module_example</a>.</p>\n<p>For further reference, here are a number of other modules that I maintain which use variations of this same strategy;</p>\n<ul>\n<li><a href=\"https://github.com/symbioquine/farmOS_land_drawing_tool\">https://github.com/symbioquine/farmOS_land_drawing_tool</a></li>\n<li><a href=\"https://github.com/symbioquine/farmOS_wfs\">https://github.com/symbioquine/farmOS_wfs</a></li>\n<li><a href=\"https://github.com/symbioquine/farm_map_sjc\">https://github.com/symbioquine/farm_map_sjc</a></li>\n<li><a href=\"https://github.com/symbioquine/farmOS_asset_link\">https://github.com/symbioquine/farmOS_asset_link</a></li>\n<li><a href=\"https://github.com/symbioquine/farm_map_google\">https://github.com/symbioquine/farm_map_google</a></li>\n<li><a href=\"https://github.com/symbioquine/drupal_jupyterlite\">https://github.com/symbioquine/drupal_jupyterlite</a></li>\n</ul>\n<p>Have fun and build some cool stuff!</p>","timeToRead":9,"excerpt":"Sometimes CI architectures are more a product of circumstance than we'd like. The strategy described in this post is a prime example of that…","frontmatter":{"title":"Building Drupal Modules with GitHub Actions","cover":null,"date":"2022-09-28T00:00:00.000Z","categories":["Tutorials"],"tags":["Software Engineering"]},"fields":{"slug":"/2022-09-28-github-actions-drupal-module-build-step","date":"September 28, 2022"}}},"pageContext":{"slug":"/2022-09-28-github-actions-drupal-module-build-step","nexttitle":"Local-first self-hosting","nextslug":"/2022-09-25-local-first-self-hosting","prevtitle":"MultiPlus Inverter Metrics","prevslug":"/2022-12-31-multiplus-inverter-metrics"}},"staticQueryHashes":["3969716136"]}